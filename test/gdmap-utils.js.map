{"version":3,"file":"gdmap-utils.js","sources":["../src/components/base/Overlays.js","../src/components/base/Enum.js","../src/js/utils.js","../node_modules/_style-inject@0.3.0@style-inject/dist/style-inject.es.js","../src/components/NormalText/NormalText.js","../src/components/Polyrect/Polyrect.js","../src/components/PolyrectList/PolyrectList.js","../src/components/Text3D/Text3D.js","../src/components/RadarChart/RadarChart.js","../src/components/TextQueue/TextQueue.js","../src/components/ShadowText/ShadowText.js","../src/js/math.js","../src/components/base/gl_Overlays.js","../src/components/gl_Polyrect/gl_Polyrect.js","../src/components/gl_PolyrectList/gl_PolyrectList.js","../src/components/gl_RegularPrism/gl_RegularPrism.js","../src/components/gl_RegularPrismList/gl_RegularPrismList.js","../src/main.js"],"sourcesContent":["/**\r\n * 地图覆盖物基类\r\n */\r\nexport default class Overlays {\r\n  constructor(opt) {\r\n    this.__initialize(opt || {})\r\n  }\r\n\r\n  __initialize(opt) {\r\n    this.CLASS_NAME = this.constructor.name\r\n    this.__map = opt.map || null\r\n    this.__position = opt.position\r\n    this.__zIndex = opt.zIndex || 10\r\n    this.__extData = opt.extData\r\n    if (opt.map) {\r\n      setTimeout(() => {\r\n        this.setMap(opt.map)\r\n      }, 1);\r\n    }\r\n  }\r\n  // 对overlays递归调用methodName方法.\r\n  __callMethod(overlays, methodName, ...methodArguments) {\r\n    if (overlays === null) return\r\n    if (Array.isArray(overlays)) {\r\n      overlays.forEach(o => {\r\n        // o[methodName](...methodArguments)\r\n        this.__callMethod(o, methodName, ...methodArguments)\r\n      })\r\n    } else if (typeof overlays === 'object') {\r\n      if (typeof overlays[methodName] === 'function') {\r\n        overlays[methodName](...methodArguments)\r\n      } else {\r\n        console.warn('对象找不到方法:' + methodName, overlays)\r\n      }\r\n    } else {\r\n      console.warn('传入值不是实例对象', overlays)\r\n    }\r\n  }\r\n\r\n  // 批量赋值,假定传入的参数在内部均为开头加上 _\r\n  __changeOptions(opt, keyList = null) {\r\n    let isChange = false\r\n    let list = Array.isArray(keyList) ? keyList : Object.keys(opt)\r\n    list.forEach(key => {\r\n      if (!(key in opt)) return\r\n      let sourceKey = '_' + key\r\n      let value = this[sourceKey]\r\n      if (value === undefined) {\r\n        console.warn('未找到该字段属性:' + key)\r\n      }\r\n      if (value !== opt[key]) {\r\n        this[sourceKey] = opt[key]\r\n        isChange = true\r\n      }\r\n    })\r\n    return isChange\r\n\r\n  }\r\n\r\n  getzIndex() {\r\n    return this.__zIndex\r\n  }\r\n\r\n  setzIndex(zIndex) {\r\n    this.__zIndex = zIndex\r\n    let overlays = this.getOverlays()\r\n    this.__callMethod(overlays, 'setzIndex', zIndex)\r\n  }\r\n\r\n  // 获取自定义对象\r\n  getExtData() {\r\n    let extData = this.__extData\r\n    if (typeof extData === 'function') {\r\n      let data = extData()\r\n      return data\r\n    }\r\n    return extData\r\n  }\r\n  // 设置自定义对象\r\n  setExtData(data) {\r\n    this.__extData = data\r\n  }\r\n  // 获取经纬度\r\n  getPosition() {\r\n    return this.__position\r\n  }\r\n  // 设置经纬度\r\n  setPosition(position) {\r\n    this.__position\r\n    let overlays = this.getOverlays()\r\n    this.__callMethod(overlays, 'setPosition', position)\r\n  }\r\n\r\n  // 获取所有覆盖物方法,内部调用,需要子类自行实现\r\n  getOverlays() {\r\n    return this.__overlays || null\r\n  }\r\n\r\n  // 设置所有覆盖物 内部调用.\r\n  setOverlays(overlays) {\r\n    this.__overlays = overlays\r\n  }\r\n\r\n  isShow() {\r\n    return this.getMap() !== null\r\n  }\r\n\r\n  // 显示在地图上.\r\n  setMap(map) {\r\n\r\n    this.__map = map\r\n    let overlays = this.getOverlays()\r\n    this.__callMethod(overlays, 'setMap', map)\r\n  }\r\n\r\n  getMap() {\r\n    return this.__map || null\r\n  }\r\n\r\n  // 销毁\r\n  destroy() {\r\n    this.setMap(null)\r\n  }\r\n}","\r\nexport let MIN_ZOOM = 1   // 地图最小级别\r\nexport let MAX_ZOOM = 19  // 地图最大级别\r\n\r\nexport let DEFAULT_IMAGE_WIDTH = 25\r\nexport let DEFAULT_IMAGE_HEIGHT = 35","/**\r\n * 如果value为undefined则返回ifundefineValue,否则返回value\r\n * @param {*} value 传入值\r\n * @param {*} ifundefineValue 默认值\r\n */\r\nexport function getDefaultByundefined(value, ifundefineValue) {\r\n  return value === undefined ? ifundefineValue : value\r\n}\r\n\r\n/**\r\n * 将字符串形式经纬度网格转为数组形式\r\n * x1,y1;x2,y2,..|xn,yn;xn+1,yn+1..\r\n * @param {String} coordinate \r\n * @param {String} sep\r\n * @returns {Array}[[[x1,y1],[x2,y2],...],[[xn,yn],[xn+1,yn+1],...]]\r\n */\r\nexport function transposePolyrect(coordinate, sep = '|') {\r\n  var arr = []\r\n  let pattern = /\\d+(\\.\\d+)?/g\r\n  if (typeof coordinate === 'string') {\r\n    let temp = coordinate.split(sep)\r\n    temp.forEach(t => {\r\n      if (t) {\r\n        let re = [];\r\n        let mat = t.match(pattern);\r\n        if (mat) {\r\n          for (var i = 1; i < mat.length; i += 2) {\r\n            var x = parseFloat(mat[i - 1]);\r\n            var y = parseFloat(mat[i]);\r\n            re.push([x, y]);\r\n          }\r\n          arr.push(re)\r\n        }\r\n      }\r\n    })\r\n  } else {\r\n    console.warn('经纬度格式有误:', coordinate)\r\n  }\r\n  return arr;\r\n}\r\n/**\r\n * 获取字符串的宽度\r\n * @param {String} str \r\n */\r\nexport function getTextWidth(str, fontSize = 20) {\r\n  if (!str) return 0;\r\n  let temp = str.replace(/[^\\\\x00-\\\\xff]/g, 'aa')\r\n  return (temp.length * fontSize) / 2\r\n}\r\n\r\n/**\r\n * 筛选出修改目标opt的不相同的属性\r\n * @param {Object} targetOpt 目标opt\r\n * @param {Object} changeOpt 需要改变的opt\r\n * @returns {Object} 返回差异对象(changeopt中的属性值和targetOpt中相同时返回null)\r\n */\r\nexport function getDiffObject(targetOpt, changeOpt) {\r\n  let rst = {}\r\n  let changeFlag = false\r\n  for (let key in changeOpt) {\r\n    let targetValue = targetOpt[key]\r\n    if (targetValue === undefined) {\r\n      console.warn('目标对象未找到该参数:' + key)\r\n    }\r\n    let value = changeOpt[key]\r\n    if (targetValue !== value) {\r\n      rst[key] = value\r\n      changeFlag = true\r\n    }\r\n  }\r\n  return changeFlag ? rst : null\r\n}\r\n/**\r\n * 返回两个区域的交集\r\n * @param {*} parentMin \r\n * @param {*} parentMax \r\n * @param {*} min \r\n * @param {*} max \r\n */\r\nexport function getIntersection(parentMin, parentMax, min, max) {\r\n  let minZoom = parentMin < min ? min : parentMin\r\n  let maxZoom = parentMax > max ? max : parentMax\r\n  return {\r\n    minZoom,\r\n    maxZoom\r\n  }\r\n}\r\n// 合并obj\r\nexport function getMergeObject(...objs) {\r\n  let rst = objs.reduce((pre, sur) => {\r\n    if (!sur) return pre\r\n    return {\r\n      ...pre,\r\n      ...sur\r\n    }\r\n  }, {})\r\n  return rst\r\n}\r\n\r\n// 求角度\r\nexport function getAngle(px, py, mx, my) {\r\n  var x = Math.abs(px - mx);\r\n  var y = Math.abs(py - my);\r\n  var z = Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2));\r\n  if (z == 0) return 0;\r\n  var cos = y / z;\r\n  var radina = Math.acos(cos); //用反三角函数求弧度\r\n\r\n  var angle = 180 * radina / Math.PI; //将弧度转换成角度\r\n  //因为算出来的值是[0,90),需要转成[0,360)\r\n  if (mx >= px) {\r\n    if (my >= py) {\r\n      angle = 90 - angle;\r\n    } else {\r\n      angle = 270 + angle;\r\n    }\r\n  } else {\r\n    if (my >= py) {\r\n      angle = 90 + angle;\r\n    } else {\r\n      angle = 270 - angle;\r\n    }\r\n  }\r\n  return angle;\r\n}\r\n\r\n\r\nexport function uuid() {\r\n  var s = [];\r\n  var hexDigits = \"0123456789abcdef\";\r\n  for (var i = 0; i < 36; i++) {\r\n    s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);\r\n  }\r\n  s[14] = \"4\"; // bits 12-15 of the time_hi_and_version field to 0010\r\n  s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1); // bits 6-7 of the clock_seq_hi_and_reserved to 01\r\n  s[8] = s[13] = s[18] = s[23] = \"-\";\r\n\r\n  var uuid = s.join(\"\");\r\n  return uuid;\r\n}\r\n\r\n/**\r\n * 返回修正后的Bounds范围:\r\n * 地图区域有遮挡或者其他内容时,传入目标返回以及偏移值,返回修正后的范围\r\n * 主要和map.setBounds方法配合使用.\r\n * @param {AMap.Bounds} sourceBound \r\n * @param {Number} left 地图显示有效区域距离实际地图容器左侧比例\r\n * @param {Number} top 地图显示有效区域距离实际地图容器上方比例\r\n * @param {Number} width 地图显示有效宽度与实际地图容器宽度比值\r\n * @param {Number} height 地图显示有效高度与实际地图容器高度比值\r\n */\r\nexport function getFixMapBound(sourceBound, left, top, width, height) {\r\n  let minPoint = sourceBound.getSouthWest()\r\n  let maxPoint = sourceBound.getNorthEast()\r\n\r\n  // 计算出原区域的经纬度差值\r\n  let subX = maxPoint.getLng() - minPoint.getLng()\r\n  let subY = maxPoint.getLat() - minPoint.getLat()\r\n\r\n\r\n  let addX = subX / width - subX // 总共需要增加的经度值\r\n  let addY = subY / height - subY // 总共需要增加的维度值\r\n\r\n  let topY = subY * top / height // 头部维度差值\r\n  let leftX = subX * left / width // 左边经度差值\r\n  let rightX = addX - leftX\r\n  let bottomY = addY - topY\r\n\r\n  let minXY = [minPoint.getLng() - leftX, minPoint.getLat() - bottomY]\r\n  let maxXY = [maxPoint.getLng() + rightX, maxPoint.getLat() + topY]\r\n\r\n  return new AMap.Bounds(minXY, maxXY)\r\n}","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import './NormalText.scss'\r\nimport Overlays from '../base/Overlays'\r\nimport {\r\n  getTextWidth\r\n} from '../../js/utils'\r\n\r\n/**\r\n * 不用高德原生的主要原因是,text会影响外面网格的鼠标事件,处理起来很麻烦\r\n * opt :\r\n * text : 显示的文字 String\r\n * textColor : 文字颜色 String #fff\r\n * position : 定位经纬度\r\n * offsetTop:Number\r\n * offsetLeft:Number\r\n */\r\nexport default class NormalText extends Overlays {\r\n  constructor(opt) {\r\n    super(opt)\r\n    // this._clickHandle = this._clickHandle.bind(this)\r\n    this._initialize(opt || {})\r\n  }\r\n  _initialize(opt) {\r\n    this._text = opt.text || ''\r\n    this._textColor = opt.textColor || '#fff'\r\n    this._paddingWidth = opt.paddingWidth || 20\r\n    this._textSize = opt.textSize || 20\r\n    this._paddingHeight = opt.paddingHeight || 10\r\n    this._offsetTop = opt.offsetTop || 0\r\n    this._offsetLeft = opt.offsetLeft || 0\r\n    // this._click = opt.click\r\n    this._createMarker()\r\n    // opt.map && this.setMap(opt.map)\r\n  }\r\n\r\n  _createMarker() {\r\n    let width = getTextWidth(this._text, this._textSize) + this._paddingWidth\r\n    let height = this._textSize + this._paddingHeight\r\n    let dom = (this._dom = this._createElement(height, width))\r\n    let marker = new AMap.Marker({\r\n      position: this.getPosition(),\r\n      offset: new AMap.Pixel(\r\n        -width / 2 + this._offsetLeft,\r\n        -height / 2 + this._offsetTop\r\n      ),\r\n      content: dom.body,\r\n      bubble: true,\r\n      zIndex: this.getzIndex()\r\n    })\r\n    this.setOverlays(marker)\r\n  }\r\n  _createElement(height, width) {\r\n    let body = document.createElement('div')\r\n    body.className = 'dcmap-normaltext-container'\r\n\r\n    // body.style.width = width + 'px'\r\n    body.style.height = height + 'px'\r\n    let text = document.createElement('div')\r\n    text.className = 'text'\r\n    text.style.width = width + 'px'\r\n    text.style.fontSize = this._textSize + 'px'\r\n    text.style.color = this._textColor\r\n    text.innerText = this._text\r\n\r\n    // text.addEventListener('click', this._clickHandle)\r\n    body.appendChild(text)\r\n    return {\r\n      body,\r\n      text\r\n    }\r\n  }\r\n\r\n  // _clickHandle() {\r\n  //   if (typeof this._click === 'function') {\r\n  //     let data = this.getExtData()\r\n  //     this._click(data)\r\n  //   }\r\n  // }\r\n\r\n  getTextColor() {\r\n    return this._textColor\r\n  }\r\n\r\n  setTextColor(color) {\r\n    this._textColor = color\r\n    let text = this._dom.text\r\n    text.style.color = this._textColor\r\n  }\r\n\r\n  getValue() {\r\n    return this._text\r\n  }\r\n\r\n  setValue(value) {\r\n    this._text = value\r\n    let text = this._dom.text\r\n    text.innerText = this._text\r\n  }\r\n}","// import './Polyrect.scss'\r\nimport {\r\n  MIN_ZOOM,\r\n  MAX_ZOOM\r\n} from '../base/Enum'\r\nimport {\r\n  getDefaultByundefined,\r\n  transposePolyrect,\r\n  getIntersection\r\n} from '../../js/utils.js'\r\nimport Overlays from '../base/Overlays'\r\nimport NormalText from '../NormalText/NormalText.js'\r\n/**\r\n * 后期优化: 最佳做法应该是把canvas和dom渲染模式拆成两个类实现,\r\n * 后面有时间的话重新写一下\r\n * opt :\r\n * map\r\n * coordinate\r\n * checkCoordinate\r\n * strokeColor\r\n * strokeOpacity\r\n * strokeWeight\r\n * fillColor\r\n * fillOpacity\r\n * textOption\r\n * textClass\r\n * click\r\n * mouseover\r\n * mouseout\r\n * useCanvas\r\n * canvasDom\r\n */\r\nexport default class Polyrect extends Overlays {\r\n  constructor(opt) {\r\n    super(opt)\r\n    this._clickHandle = this._clickHandle.bind(this)\r\n    this._mouseOut = this._mouseOut.bind(this)\r\n    this._mouseOver = this._mouseOver.bind(this)\r\n    this._initialize(opt || {})\r\n  }\r\n  _initialize(opt) {\r\n    // 网格颜色样式\r\n    this._strokeColor = opt.strokeColor || '#f00'\r\n    this._strokeOpacity = getDefaultByundefined(opt.strokeOpacity, 0.8)\r\n    this._strokeWeight = getDefaultByundefined(opt.strokeWeight, 1)\r\n    this._fillColor = opt.fillColor || 'blue'\r\n    this._fillOpacity = getDefaultByundefined(opt.fillOpacity, 0.2)\r\n\r\n    // 文字样式\r\n    this._textOption = opt.textOption || {\r\n      text: opt.text || '未输入文字内容',\r\n      textColor: opt.textColor || 'red'\r\n    }\r\n\r\n    // 事件\r\n    this._click = opt.click\r\n    this._mouseover = opt.mouseover\r\n    this._mouseout = opt.mouseout\r\n\r\n    // 是否使用canvas绘制\r\n    this._useCanvas = getDefaultByundefined(opt.useCanvas, false)\r\n    // this._canvasDom = opt.canvasDom\r\n    // 网格坐标\r\n    this._coordinate = transposePolyrect(opt.coordinate)\r\n    this._checkCoordinate = transposePolyrect(opt.checkCoordinate || '')\r\n    // 如果有简易网格,创建简易网格绑定事件\r\n    this._createCheckPolygon()\r\n    if (this.isUseCanvas()) {\r\n      this._createCustomLayer() // 后面优化.\r\n    } else {\r\n      this._createPolygon()\r\n      this._overLayGroup = new AMap.OverlayGroup(this._polygons)\r\n    }\r\n\r\n    // 创建文字\r\n    let TextClass = getDefaultByundefined(opt.textClass, NormalText)\r\n    if (TextClass) this._createText(TextClass)\r\n  }\r\n\r\n  _createText(TextClass) {\r\n    if (this._textObj) {\r\n      typeof this._textObj.destroy === 'function' && this._textObj.destroy()\r\n      this._textObj = null\r\n    }\r\n    if (!TextClass) {\r\n      console.warn('未找到文字对象,检查textClass参数', TextClass)\r\n      return\r\n    }\r\n    let minZoom = getDefaultByundefined(this._textOption.minZoom, MIN_ZOOM)\r\n    let maxZoom = getDefaultByundefined(this._textOption.maxZoom, MAX_ZOOM)\r\n    let zoom = getIntersection(this.__minZoom, this.__maxZoom, minZoom, maxZoom)\r\n    let opt = {\r\n      map: this.getMap(),\r\n      position: this.getPosition(),\r\n      zIndex: this.getzIndex(),\r\n      ...this._textOption,\r\n      ...zoom,\r\n      extData: () => {\r\n        let extData = this.getExtData()\r\n        return extData || null\r\n      }\r\n    }\r\n    this._textObj = new TextClass(opt)\r\n  }\r\n\r\n  // 创建简易网格\r\n  _createCheckPolygon() {\r\n    if (!this.hasCheckPolygon()) return\r\n    if (this._checkCoordinate.length > 1) {\r\n      console.warn('checkCoordinate建议设置为单区域简单多边形以提高性能')\r\n    }\r\n    this._checkPolygons = this._checkCoordinate.map(coordinate => {\r\n      let polygon = new AMap.Polygon({\r\n        path: coordinate,\r\n        strokeOpacity: 0,\r\n        strokeWeight: 0,\r\n        fillOpacity: 0,\r\n        zIndex: this.__zIndex + 1,\r\n        bubble: true\r\n      })\r\n      this._addEvent(polygon)\r\n      return polygon\r\n    })\r\n  }\r\n\r\n  // 创建区域网格\r\n  _createPolygon() {\r\n    // 如果有简易区域则不需要绑定事件,否则需要绑定事件\r\n    let hasBindEvent = this.hasCheckPolygon()\r\n\r\n    this._polygons = this._coordinate.map(coordinate => {\r\n      let polygon = new AMap.Polygon({\r\n        path: coordinate,\r\n        strokeColor: this._strokeColor,\r\n        strokeOpacity: this._strokeOpacity,\r\n        strokeWeight: this._strokeWeight,\r\n        fillColor: this._fillColor,\r\n        fillOpacity: this._fillOpacity,\r\n        zIndex: this.__zIndex,\r\n        bubble: true\r\n      })\r\n      if (!hasBindEvent) this._addEvent(polygon)\r\n      return polygon\r\n    })\r\n  }\r\n\r\n  _createCustomLayer() {\r\n    // TODO\r\n    let canvas = this._canvas = document.createElement('canvas')\r\n    this._ctx = canvas.getContext('2d')\r\n    let map = this.getMap()\r\n    if (map) {\r\n      let size = this.getMap().getSize();\r\n      canvas.width = this._canvas_width = size.width;\r\n      canvas.height = this._canvas_height = size.height;\r\n    }\r\n    this._cus = new AMap.CustomLayer(canvas, {\r\n      zIndex: 10\r\n    })\r\n    this._cus.render = this._draw.bind(this)\r\n  }\r\n  _draw() {\r\n    this._clearCanvas(this._ctx)\r\n    this._drawCanvas(this._ctx)\r\n  }\r\n\r\n  _clearCanvas(ctx) {\r\n    ctx.clearRect(0, 0, this._canvas_width, this._canvas_height)\r\n  }\r\n\r\n  _drawCanvas(ctx) {\r\n    ctx.save()\r\n    ctx.strokeStyle = this._strokeColor\r\n    ctx.lineWidth = this._strokeWeight\r\n    ctx.fillStyle = this._fillColor\r\n\r\n    this._coordinate.forEach(arr => {\r\n      let pixels = arr.map(t => this.getMap().lngLatToContainer(t))\r\n      ctx.beginPath()\r\n      ctx.globalAlpha = this._strokeOpacity\r\n      pixels.forEach(pixel => {\r\n        ctx.lineTo(pixel.getX(), pixel.getY())\r\n      })\r\n      ctx.closePath()\r\n      ctx.stroke()\r\n      ctx.globalAlpha = this._fillOpacity\r\n      ctx.fill()\r\n    })\r\n    ctx.restore();\r\n  }\r\n\r\n  _addEvent(overlays) {\r\n    overlays.on('mouseover', this._mouseOver)\r\n    overlays.on('mouseout', this._mouseOut)\r\n    overlays.on('click', this._clickHandle)\r\n  }\r\n  // 移出区域\r\n  _mouseOut(e) {\r\n    typeof this._mouseout === 'function' && this._mouseout.call(this, this.getExtData(), e, this)\r\n  }\r\n  // 鼠标移入区域\r\n  _mouseOver(e) {\r\n    typeof this._mouseover === 'function' && this._mouseover.call(this, this.getExtData(), e, this)\r\n  }\r\n  _clickHandle(e) {\r\n    typeof this._click === 'function' && this._click.call(this, this.getExtData(), e, this)\r\n  }\r\n\r\n  isUseCanvas() {\r\n    return !!this._useCanvas\r\n  }\r\n\r\n  // 获取文字对象,进行更多文字操作\r\n  getText() {\r\n    return this._textObj || null\r\n  }\r\n\r\n  setText(textObj) {\r\n    let oldText = this.getText()\r\n    if (oldText) oldText.destroy()\r\n    this._textObj = textObj\r\n    if (this.getMap()) {\r\n\r\n    }\r\n  }\r\n\r\n  // 获取网格样式\r\n  getPolygonStyle() {\r\n    return {\r\n      strokeColor: this._strokeColor,\r\n      strokeOpacity: this._strokeOpacity,\r\n      strokeWeight: this._strokeWeight,\r\n      fillColor: this._fillColor,\r\n      fillOpacity: this._fillOpacity\r\n    }\r\n  }\r\n\r\n  // 设置网格样式\r\n  setPolygonStyle(opt = {}) {\r\n    const KEY_LIST = ['fillColor', 'fillOpacity', 'strokeColor', 'strokeOpacity', 'strokeWeight']\r\n    if (this.__changeOptions(opt, KEY_LIST)) {\r\n      if (this.isUseCanvas()) {\r\n        this._draw()\r\n      } else {\r\n        this._overLayGroup.setOptions(opt)\r\n      }\r\n    }\r\n  }\r\n  // override\r\n  getOverlays() {\r\n    let checkPolygon = this._checkPolygons || []\r\n\r\n    let rst = [...checkPolygon]\r\n    if (this._polygons) rst.push(...this._polygons)\r\n    let text = this.getText()\r\n    if (text) rst.push(text)\r\n    if (this._cus) rst.push(this._cus)\r\n    return rst\r\n  }\r\n\r\n  setMap(map) {\r\n    super.setMap(map)\r\n    if (map) {\r\n      if (this.isUseCanvas()) {\r\n        let canvas = this._canvas\r\n        let size = map.getSize();\r\n        canvas.width = this._canvas_width = size.width;\r\n        canvas.height = this._canvas_height = size.height;\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  // 判断是否存在简易网格\r\n  hasCheckPolygon() {\r\n    return this._checkCoordinate && this._checkCoordinate.length > 0\r\n  }\r\n\r\n  // 销毁\r\n  destroy() {\r\n    super.destroy()\r\n  }\r\n}","import {\r\n  getMergeObject,\r\n  getDefaultByundefined\r\n} from '../../js/utils.js'\r\nimport Overlays from '../base/Overlays'\r\nimport Polyrect from '../Polyrect/Polyrect'\r\n/**\r\n * opt :\r\n * map\r\n * strokeColor\r\n * strokeOpacity\r\n * strokeWeight\r\n * fillColor\r\n * fillOpacity\r\n * textOption\r\n * textClass\r\n * useCanvas\r\n * click\r\n * mouseover\r\n * mouseout\r\n */\r\nexport default class PolyrectList extends Overlays {\r\n  constructor(opt) {\r\n    super(opt)\r\n    this._clickHandle = this._clickHandle.bind(this)\r\n    this._mouseOut = this._mouseOut.bind(this)\r\n    this._mouseOver = this._mouseOver.bind(this)\r\n    this._initialize(opt || {})\r\n  }\r\n\r\n  _clickHandle(extData, e, polyrect) {\r\n    typeof this._click === 'function' && this._click.call(this, polyrect, e)\r\n  }\r\n  _mouseOut(extData, e, polyrect) {\r\n    typeof this._mouseout === 'function' && this._mouseout.call(this, polyrect, e)\r\n  }\r\n  _mouseOver(extData, e, polyrect) {\r\n    typeof this._mouseover === 'function' && this._mouseover.call(this, polyrect, e)\r\n  }\r\n  _initialize(opt) {\r\n    this._strokeColor = opt.strokeColor || '#f00'\r\n    this._strokeOpacity = getDefaultByundefined(opt.strokeOpacity, 0.8)\r\n    this._strokeWeight = getDefaultByundefined(opt.strokeWeight, 1)\r\n    this._fillColor = opt.fillColor || 'blue'\r\n    this._fillOpacity = getDefaultByundefined(opt.fillOpacity, 0.2)\r\n    this._textOption = opt.textOption\r\n\r\n    this._click = opt.click\r\n    this._mouseover = opt.mouseover\r\n    this._mouseout = opt.mouseout\r\n\r\n    this._useCanvas = getDefaultByundefined(opt.useCanvas, false)\r\n    this._textClass = opt.textClass\r\n\r\n    this._polyrects = []\r\n  }\r\n\r\n  getPolygonStyle() {\r\n    return {\r\n      strokeColor: this._strokeColor,\r\n      strokeOpacity: this._strokeOpacity,\r\n      strokeWeight: this._strokeWeight,\r\n      fillColor: this._fillColor,\r\n      fillOpacity: this._fillOpacity\r\n    }\r\n  }\r\n\r\n  setPolygonStyle(opt = {}) {\r\n    const KEY_LIST = ['fillColor', 'fillOpacity', 'strokeColor', 'strokeOpacity', 'strokeWeight']\r\n    if (this.__changeOptions(opt, KEY_LIST)) {\r\n      if (this._polyrects && this._polyrects.length > 0) {\r\n        this._polyrects.forEach(polyrect => {\r\n          polyrect.setPolygonStyle(opt)\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {Array(opt)} list \r\n   * opt :\r\n   * checkCoordinate\r\n   * coordinate\r\n   * longitude\r\n   * latitude\r\n   * strokeColor\r\n   * strokeWeight\r\n   * strokeOpacity\r\n   * fillColor\r\n   * fillOpacity\r\n   * textOption\r\n   * textClass\r\n   * extData\r\n   */\r\n  setData(list) {\r\n    this.clear()\r\n    let g = getDefaultByundefined\r\n    this._polyrects = list.map(item => {\r\n      let opt = {\r\n        map: this.getMap(),\r\n        checkCoordinate: item.checkCoordinate,\r\n        coordinate: item.coordinate,\r\n        position: item.position,\r\n        strokeColor: g(item.strokeColor, this._strokeColor),\r\n        strokeWeight: g(item.strokeWeight, this._strokeWeight),\r\n        strokeOpacity: g(item.strokeOpacity, this._strokeOpacity),\r\n        fillColor: g(item.fillColor, this._fillColor),\r\n        fillOpacity: g(item.fillOpacity, this._fillOpacity),\r\n        textOption: getMergeObject(this._textOption, item.textOption),\r\n        textClass: g(item.textClass, this._textClass),\r\n        useCanvas: this._useCanvas,\r\n        click: this._clickHandle,\r\n        mouseout: this._mouseOut,\r\n        mouseover: this._mouseOver,\r\n        extData: item.extData || item,\r\n        zIndex: item.zIndex || this.getzIndex()\r\n      }\r\n      return new Polyrect(opt)\r\n    })\r\n  }\r\n\r\n  getPolyrects() {\r\n    let list = this._polyrects || []\r\n    return [...list]\r\n  }\r\n\r\n  showText() {\r\n    let list = this.getPolyrects()\r\n    list.forEach(polyrect => {\r\n      let text = polyrect.getText()\r\n      if (text) text.setMap(this.getMap())\r\n    })\r\n  }\r\n\r\n  hideText() {\r\n    let list = this.getPolyrects()\r\n    list.forEach(polyrect => {\r\n      let text = polyrect.getText()\r\n      if (text) text.setMap(null)\r\n    })\r\n  }\r\n\r\n  clear() {\r\n    let list = this.getOverlays()\r\n    if (list && list.length > 0) {\r\n      list.forEach(polyrect => {\r\n        polyrect.destroy()\r\n      })\r\n      this._polyrects = []\r\n    }\r\n  }\r\n\r\n  getOverlays() {\r\n    return this.getPolyrects()\r\n  }\r\n\r\n  destroy() {\r\n    super.destroy()\r\n  }\r\n\r\n}","import './Text3D.scss'\r\nimport {\r\n  DEFAULT_IMAGE_WIDTH,\r\n  DEFAULT_IMAGE_HEIGHT\r\n} from '../base/Enum'\r\nimport Overlays from '../base/Overlays'\r\n\r\n/**\r\n * opt :\r\n * text 文字内容\r\n * textColor 文字颜色\r\n * isShowRipples 是否显示涟漪\r\n * imageOption : {\r\n *  height,width,src\r\n * }\r\n * className 标记点自定义class\r\n * click, 点击事件\r\n * mouseover, 鼠标移入事件\r\n * mouseout 鼠标移出事件\r\n * \r\n * methods\r\n * showRipples    //显示涟漪效果\r\n * closeRipples   //关闭涟漪效果\r\n * getValue   //获取文字内容\r\n * setValue   // 设置文字内容\r\n */\r\nexport default class Text3D extends Overlays {\r\n  constructor(opt) {\r\n    super(opt)\r\n    this._clickHandle = this._clickHandle.bind(this)\r\n    this._mouseOut = this._mouseOut.bind(this)\r\n    this._mouseOver = this._mouseOver.bind(this)\r\n    this._initialize(opt || {})\r\n  }\r\n\r\n  _initialize(opt) {\r\n    this._text = opt.text || ''\r\n    this._textColor = opt.textColor\r\n    this._showRipples = !!opt.isShowRipples\r\n    this._imageOption = opt.imageOption || {}\r\n    this._className = opt.className\r\n\r\n    this._click = opt.click\r\n    this._mouseover = opt.mouseover\r\n    this._mouseout = opt.mouseout\r\n\r\n    this._createMarker()\r\n  }\r\n\r\n  // 展示涟漪效果\r\n  showRipples() {\r\n    let dom = this._dom\r\n    dom.smallCircle.style.display = 'block'\r\n    dom.largeCircle.style.display = 'block'\r\n    this._showRipples = true;\r\n  }\r\n\r\n  closeRipples() {\r\n    let dom = this._dom\r\n    dom.smallCircle.style.display = '';\r\n    dom.largeCircle.style.display = '';\r\n    this._showRipples = false\r\n  }\r\n\r\n  _clickHandle(e) {\r\n    typeof this._click === 'function' && this._click.call(this, this.getExtData(), e)\r\n  }\r\n  _mouseOut(e) {\r\n    typeof this._mouseout === 'function' && this._mouseout.call(this, this.getExtData(), e)\r\n  }\r\n  _mouseOver(e) {\r\n    typeof this._mouseover === 'function' && this._mouseover.call(this, this.getExtData(), e)\r\n  }\r\n\r\n  _createMarker() {\r\n    let dom = this._dom = this._createElement()\r\n    let height = this._imageOption.height || DEFAULT_IMAGE_HEIGHT\r\n    dom.body.addEventListener('mouseenter', this._mouseOver)\r\n    dom.body.addEventListener('mouseleave', this._mouseOut)\r\n    dom.body.addEventListener('click', this._clickHandle)\r\n    let marker = new AMap.Marker({\r\n      position: this.__position,\r\n      offset: new AMap.Pixel(0, -height - 20),\r\n      content: dom.body,\r\n      zIndex: this.getzIndex()\r\n    })\r\n    this.setOverlays(marker)\r\n    if (this._showRipples) {\r\n      this.showRipples()\r\n    }\r\n  }\r\n\r\n  getValue() {\r\n    // return this._dom.text.innerText\r\n    return this._text\r\n  }\r\n\r\n  setValue(value) {\r\n    this._dom.text.innerText = strText\r\n    this._text = strText\r\n  }\r\n\r\n  _createElement() {\r\n    let height = this._imageOption.height || DEFAULT_IMAGE_HEIGHT\r\n    let body = document.createElement('div')\r\n    body.className = 'dcmap-text3d-container ' + this._className\r\n    body.style.height = (height + 30) + 'px'\r\n    // 涟漪效果\r\n    let smallCircle = document.createElement('div');\r\n    smallCircle.className = 'map-point-small-circle'\r\n    body.appendChild(smallCircle);\r\n\r\n    let largeCircle = document.createElement('div');\r\n    largeCircle.className = 'map-point-large-circle';\r\n    body.appendChild(largeCircle)\r\n\r\n    let text = document.createElement('span')\r\n    text.className = 'map-point-text-dom'\r\n    text.style.color = this._textColor\r\n    text.innerText = this._text\r\n    body.appendChild(text)\r\n\r\n    let img = document.createElement('div')\r\n    img.className = 'map-point-img-dom'\r\n    img.style.width = this._imageOption.width || DEFAULT_IMAGE_WIDTH\r\n    img.style.height = height\r\n    if (this._imageOption.src) {\r\n      img.style.backgroundImage = `url('${this._imageOption.src}')`\r\n    }\r\n\r\n    body.appendChild(img)\r\n\r\n    return {\r\n      body,\r\n      text,\r\n      img,\r\n      smallCircle,\r\n      largeCircle\r\n    }\r\n\r\n  }\r\n\r\n}","// import Overlays from '../base/Overlays'\r\nimport {\r\n  getAngle\r\n} from '../../js/utils'\r\n/**\r\n * opt\r\n * map 高德地图实例(必传)\r\n * center 雷达圆心 (必传)\r\n * target 雷达扫描半径所在点(必传) 用来确定雷达扫描起始点以及半径\r\n * coverNumber 雷达扫描消失参数 (与speed共同定义雷达尾巴宽度,默认0.05)\r\n * speed 雷达扫描速度(多少秒扫完一圈)\r\n * fillStyle 雷达扫描颜色\r\n * callback 雷达扫描回调\r\n */\r\nexport default class RadarChart {\r\n  constructor(opt) {\r\n    this._draw = this._draw.bind(this)\r\n    this._initialize(opt || {})\r\n  }\r\n\r\n  _initialize(opt) {\r\n    this._map = opt.map\r\n    this._center = opt.center\r\n    this._target = opt.target\r\n    this._speed = opt.speed || 60\r\n    this._coverNumber = opt.coverNumber || 0.2;\r\n    this._fillStyle = opt.fillStyle || 'rgba(0,200,0,0.7)'\r\n    this._callback = opt.callback\r\n\r\n    this._isStart = false\r\n\r\n    this._deg = 360 - ~~getAngle(...this._center, ...this._target)\r\n    this._createCanvasLayer()\r\n  }\r\n  _createCanvasLayer() {\r\n    let canvas = (this._canvas = document.createElement('canvas'))\r\n    this._ctx = canvas.getContext('2d')\r\n    let positionObj = getPixel(this._center, this._target)\r\n    let minPixel = this._map.lngLatToContainer(positionObj.minPosition)\r\n    let maxPixel = this._map.lngLatToContainer(positionObj.maxPosition)\r\n    //canvas.width = this._width = maxPixel.getX() - minPixel.getX()\r\n    //canvas.height = this._height = minPixel.getY() - maxPixel.getY()\r\n    canvas.width = canvas.height = this._width = this._height = maxPixel.getX() - minPixel.getX()\r\n\r\n    // console.log(this._width, this._height, '宽高')\r\n    this._clayer = new AMap.CanvasLayer({\r\n      canvas: canvas,\r\n      bounds: new AMap.Bounds(positionObj.minPosition, positionObj.maxPosition),\r\n      zIndex: 100\r\n    })\r\n\r\n    // this._canvas2 = document.createElement('canvas')\r\n    // this._ctx2 = this._canvas2.getContext('2d')\r\n    // this._canvas2.width = this._canvas2.height = canvas.width\r\n    // this._clayer2 = new AMap.CanvasLayer({\r\n    //   canvas: this._canvas2,\r\n    //   bounds: new AMap.Bounds(positionObj.minPosition, positionObj.maxPosition),\r\n    //   zIndex: 101\r\n    // })\r\n    // this._drawCircle()\r\n    this._clayer.setMap(this._map)\r\n    // this._clayer2.setMap(this._map)\r\n  }\r\n\r\n  start() {\r\n    if (this._isStart) return\r\n    this._isStart = true\r\n    this._draw()\r\n  }\r\n\r\n  stop() {\r\n    if (this._isStart) {\r\n      this._isStart = false\r\n      setTimeout(() => {\r\n        this._ctx.clearRect(0, 0, this._width, this._height)\r\n      }, 1);\r\n    }\r\n  }\r\n\r\n  destroy() {\r\n    this.stop()\r\n    this._clayer.setMap(null)\r\n    this._clayer = null\r\n  }\r\n\r\n  _drawCircle() {\r\n\r\n    let radius = (this._width > this._height ? this._height : this._width) / 2\r\n    let ctx = this._ctx2\r\n    ctx.clearRect(0, 0, this._width, this._height)\r\n    ctx.fillStyle = this._fillStyle\r\n    ctx.globalAlpha = 0.2\r\n    ctx.beginPath()\r\n    ctx.moveTo(this._width / 2, this._height / 2)\r\n    ctx.arc(this._width / 2, this._height / 2, radius, 0, 2 * Math.PI)\r\n    ctx.closePath()\r\n    ctx.fill()\r\n  }\r\n  _draw() {\r\n    let startDeg = this._deg\r\n    this._deg += 360 / this._speed\r\n    if (this._deg >= 360) this._deg = this._deg - 360\r\n\r\n    if (!this._isStart) {\r\n      return\r\n    }\r\n\r\n    this._drawRadar()\r\n    this._cover()\r\n    // ctx.fill()\r\n    this._clayer.reFresh()\r\n\r\n    if (typeof this._callback === 'function') {\r\n      this._callback.call(this, {\r\n        start: startDeg,\r\n        end: this._deg > startDeg ? this._deg : this._deg + startDeg\r\n      })\r\n    }\r\n    window.requestAnimationFrame(this._draw)\r\n  }\r\n\r\n  _drawRadar() {\r\n    let deg = this._deg\r\n    let ctx = this._ctx\r\n    let radius = (this._width > this._height ? this._height : this._width) / 2\r\n    ctx.save()\r\n    ctx.fillStyle = this._fillStyle\r\n    ctx.beginPath()\r\n    ctx.moveTo(this._width / 2, this._height / 2)\r\n    ctx.arc(this._width / 2, this._height / 2, radius, (-360 / this._speed + deg) / 180 * Math.PI, (deg) / 180 * Math.PI)\r\n    // ctx.arc(this._width / 2, this._height / 2, radius, 0, 2 / 180 * Math.PI)\r\n    ctx.closePath()\r\n    ctx.fill()\r\n    ctx.restore()\r\n  }\r\n\r\n  _cover() {\r\n    let ctx = this._ctx\r\n    ctx.save()\r\n    let radius = (this._width > this._height ? this._height : this._width) / 2\r\n    ctx.globalCompositeOperation = \"destination-out\";\r\n    ctx.fillStyle = `rgba(0,0,0,${this._coverNumber})`\r\n    // let centerPixel = this._map.lngLatToContainer(this._center)\r\n    // ctx.arc(this._width / 2, this._height / 2, radius, 0, 2 * Math.PI)\r\n    ctx.rect(0, 0, this._width, this._height)\r\n    ctx.fill()\r\n    ctx.restore()\r\n  }\r\n\r\n  _clearRect() {\r\n    let ctx = this._ctx\r\n    ctx.clearRect(0, 0, this.width, this.height)\r\n  }\r\n}\r\n\r\nfunction getPixel(center, target) {\r\n  let dis = Math.sqrt(\r\n    Math.pow(target[0] - center[0], 2) + Math.pow(target[1] - center[1], 2)\r\n  )\r\n\r\n  return {\r\n    minPosition: [center[0] - dis, center[1] - dis],\r\n    maxPosition: [center[0] + dis, center[1] + dis]\r\n  }\r\n}","/**\r\n * opt\r\n * map\r\n * textColor\r\n * font\r\n */\r\nexport default class TextQueue {\r\n  constructor(opt) {\r\n    this._draw = this._draw.bind(this)\r\n    this._initialize(opt || {})\r\n  }\r\n  _initialize(opt) {\r\n    this._map = opt.map\r\n    this._list = []\r\n    this._textColor = opt.textColor || '#fff'\r\n    this._font = opt.font || '20px Arial'\r\n    this._start = false\r\n    this._createLayer()\r\n  }\r\n\r\n  _createLayer() {\r\n    let canvas = this._canvas = document.createElement('canvas')\r\n    this._ctx = canvas.getContext('2d')\r\n    let size = this._map.getSize()\r\n    canvas.width = this._width = size.width\r\n    canvas.height = this._height = size.height\r\n    this._cus = new AMap.CustomLayer(canvas, {\r\n      map: this._map,\r\n      zIndex: 100\r\n    })\r\n    this._cus.render = this.reload.bind(this)\r\n  }\r\n\r\n  reload() {\r\n    this._list = this._list.map(t => {\r\n      return {\r\n        ...t,\r\n        _pixel: null\r\n      }\r\n    })\r\n  }\r\n\r\n  _draw() {\r\n    if (this.getMap() != null) {\r\n      this._clearCanvas()\r\n      this._drawCanvas()\r\n      if (this._list.length > 0) {\r\n        window.requestAnimationFrame(this._draw)\r\n      } else {\r\n        this._start = false\r\n      }\r\n    } else {\r\n      this._start = false\r\n    }\r\n  }\r\n\r\n  _clearCanvas() {\r\n    let ctx = this._ctx\r\n    ctx.clearRect(0, 0, this._width, this._height)\r\n  }\r\n\r\n  _drawCanvas() {\r\n    if (this.getMap() == null) return\r\n    // console.log('draw')\r\n    let ctx = this._ctx\r\n    let now = Date.now()\r\n    ctx.textAlign = 'center'\r\n    ctx.textBaseline = \"middle\"\r\n    ctx.fillStyle = this._textColor\r\n    ctx.font = this._font\r\n    for (let i = 0; i < this._list.length; i++) {\r\n      const obj = this._list[i];\r\n      let timer = (now - obj._time) / 1000\r\n      if (timer > 3) {\r\n        obj._del = true\r\n        continue\r\n      }\r\n      let pixel = obj._pixel || this._map.lngLatToContainer(obj.position)\r\n      obj._pixel = pixel\r\n      ctx.save()\r\n      ctx.translate(pixel.getX(), pixel.getY())\r\n      let scale = 1 // 缩放因子\r\n      let opacity = 1\r\n      if (timer < 1) { // 放大\r\n        scale = scale / timer\r\n        opacity = timer\r\n      } else if (timer > 2) { // 缩小\r\n        // scale = 3 - timer\r\n        opacity = 3 - timer\r\n        scale = opacity\r\n      }\r\n      if (scale != 1) {\r\n        ctx.scale(scale, scale)\r\n\r\n      }\r\n      if (opacity != 1) {\r\n        ctx.globalAlpha = opacity\r\n      }\r\n      if (obj.textColor) {\r\n        ctx.fillStyle = obj.textColor\r\n      }\r\n      if (obj.font) {\r\n        ctx.font = obj.font\r\n      }\r\n      ctx.fillText(obj.text, 0, 0)\r\n      ctx.restore()\r\n    }\r\n    this._list = this._list.filter(t => !t._del)\r\n  }\r\n  /**\r\n   * 加入到弹幕队列\r\n   * @param {Object} objs \r\n   * position : [x,y]\r\n   * text : String 文本信息\r\n   * textColor : 文字颜色\r\n   * font : String\r\n   */\r\n  push(...objs) {\r\n    objs.forEach(obj => {\r\n      this._list.push({\r\n        ...obj,\r\n        _time: Date.now()\r\n      })\r\n    });\r\n    if (!this._start) {\r\n      this._start = true\r\n      this._draw()\r\n    }\r\n  }\r\n\r\n  setMap(map) {\r\n    this._map = map\r\n    this._cus.setMap(map)\r\n    if (map == null) {\r\n      this._start = false\r\n    } else if (!this._start) {\r\n      this._start = true\r\n      this._draw()\r\n    }\r\n\r\n  }\r\n\r\n  getMap() {\r\n    return this._map || null\r\n  }\r\n\r\n  destroy() {\r\n    this.setMap(null)\r\n    this._cus = null\r\n  }\r\n\r\n}","import './ShadowText.scss'\r\nimport Overlays from '../base/Overlays'\r\nimport {\r\n  getTextWidth\r\n} from '../../js/utils'\r\n\r\n\r\nexport default class ShadowText extends Overlays {\r\n  constructor(opt) {\r\n    super(opt)\r\n    this._initialize(opt || {})\r\n  }\r\n  _initialize(opt) {\r\n    this._text = opt.text || '未输入文字'\r\n    this._textColor = opt.textColor || '#fff'\r\n    this._textSize = opt.textSize || 20\r\n    this._shaderRatio = opt.shaderRatio || 1.2\r\n    this._offsetTop = opt.offsetTop || 0\r\n    this._offsetLeft = opt.offsetLeft || 0\r\n    this._createMarker()\r\n  }\r\n  _createMarker() {\r\n    let width = getTextWidth(this._text, this._textSize)\r\n    let height = this._textSize\r\n    this._dom = this._createElement(height, width)\r\n    let marker = new AMap.Marker({\r\n      position: this.getPosition(),\r\n      offset: new AMap.Pixel(\r\n        -this._shaderRatio * width / 2 + this._offsetLeft,\r\n        -height / 3 * 2 + this._offsetTop\r\n      ),\r\n      content: this._dom.body,\r\n      zIndex: this.getzIndex()\r\n    })\r\n    this.setOverlays(marker)\r\n  }\r\n\r\n  _createElement(height, width) {\r\n    let body = document.createElement('div')\r\n    body.className = 'dcmap-shadowtext-container'\r\n    body.style.width = width * this._shaderRatio + 'px'\r\n    body.style.height = height * 2 + 'px'\r\n\r\n    let text = document.createElement('div')\r\n    text.className = 'dcmap-shadowtext-text'\r\n    text.style.fontSize = this._textSize + 'px'\r\n    text.style.color = this._textColor\r\n    text.innerText = this._text\r\n    body.appendChild(text)\r\n\r\n    let shadow = document.createElement('div')\r\n    shadow.className = 'dcmap-shadowtext-shadow'\r\n    shadow.style.top = height / 2 + 'px'\r\n    body.appendChild(shadow)\r\n\r\n    return {\r\n      body,\r\n      text,\r\n      shadow\r\n    }\r\n  }\r\n\r\n  getTextColor() {\r\n    return this._textColor\r\n  }\r\n\r\n  setTextColor(color) {\r\n    this._textColor = color\r\n    let text = this._dom.text\r\n    text.style.color = this._textColor\r\n  }\r\n  \r\n  getValue() {\r\n    return this._text\r\n  }\r\n\r\n  setValue(value) {\r\n    this._text = value\r\n    let text = this._dom.text\r\n    text.innerText = this._text\r\n  }\r\n\r\n}","/**\r\n * 3个数中取中位数\r\n * @param {Number} a \r\n * @param {Number} b \r\n * @param {Number} c \r\n */\r\nexport function getMedian(a, b, c) {\r\n  if ((b - a) * (a - c) >= 0) {\r\n    return a;\r\n  } else if ((a - b) * (b - c) >= 0) {\r\n    return b;\r\n  } else {\r\n    return c;\r\n  }\r\n}\r\n","export default class gl_Overlays {\r\n  constructor(opt) {\r\n    this.__initialize(opt || {})\r\n  }\r\n  __initialize(opt) {\r\n    this.CLASS_NAME = this.constructor.name\r\n    this.__object3DLayer = opt.object3DLayer\r\n    this.__map = opt.map\r\n    this.__extData = opt.extData\r\n  }\r\n  // 对overlays递归调用methodName方法.\r\n  /**\r\n   * \r\n   * @param {Object} overlays \r\n   * @param {Function} method \r\n   * @param {*} methodArguments \r\n   */\r\n  __callMethod(obj, methodName, overlays) {\r\n    if (overlays == null) return\r\n    if (Array.isArray(overlays)) {\r\n      overlays.forEach(o => {\r\n        // o[methodName](...methodArguments)\r\n        this.__callMethod(obj, methodName, o)\r\n      })\r\n    } else if (overlays !== undefined) {\r\n      // method(overlays, ...methodArguments)\r\n      obj[methodName](overlays)\r\n    } else {\r\n      console.warn('传入值不是实例对象', overlays)\r\n    }\r\n  }\r\n  getExtData() {\r\n    return this.__extData\r\n  }\r\n  setExtData(data) {\r\n    this.__extData = data\r\n  }\r\n  getMap() {\r\n    return this.__map\r\n  }\r\n  setMap(map) {\r\n    this.__map = map\r\n  }\r\n  getObject3DLayer() {\r\n    return this.__object3DLayer || null\r\n  }\r\n  setObject3DLayer(object3dLayer) {\r\n    this.__object3DLayer = object3dLayer\r\n  }\r\n  // object3d\r\n  getOverlays() {\r\n    return this.__overlays\r\n  }\r\n  setOverlays(overlays) {\r\n    this.__overlays = overlays\r\n  }\r\n  show() {\r\n    let object3DLayer = this.__object3DLayer\r\n    if (object3DLayer) {\r\n      let overlays = this.getOverlays()\r\n      // this.__callMethod(overlays, object3DLayer.add)\r\n      this.__callMethod(object3DLayer, 'add', overlays)\r\n    }\r\n  }\r\n  hide() {\r\n    let object3DLayer = this.__object3DLayer\r\n    if (object3DLayer) {\r\n      let overlays = this.getOverlays()\r\n      // this.__callMethod(overlays, object3DLayer.remove)\r\n      this.__callMethod(object3DLayer, 'remove', overlays)\r\n    }\r\n  }\r\n  destroy() {\r\n    this.hide()\r\n    this.__object3DLayer = null\r\n  }\r\n}","import gl_Overlays from '../base/gl_Overlays'\r\nimport {\r\n  getDefaultByundefined,\r\n  transposePolyrect\r\n} from '../../js/utils'\r\nimport NormalText from '../NormalText/NormalText.js'\r\n/**\r\n * opt :\r\n * map 必传\r\n * object3DLayer\r\n * coordinate\r\n * color\r\n * height\r\n * transparent\r\n * extData\r\n * \r\n * position\r\n * textOption\r\n * textClass\r\n */\r\nexport default class gl_Polyrect extends gl_Overlays {\r\n  constructor(opt) {\r\n    super(opt)\r\n    this._initialize(opt || {})\r\n    this._clickHandle = this._clickHandle.bind(this)\r\n  }\r\n  _initialize(opt) {\r\n    this._height = opt.height || 5000\r\n    this._color = opt.color || '#0088ffcc'\r\n\r\n    this._transparent = getDefaultByundefined(opt.transparent, true)\r\n    let list = transposePolyrect(opt.coordinate)\r\n    this._coordinate = this.lngLatToGeodeticCoord(list)\r\n\r\n    this._click = opt.click\r\n\r\n    this._position = opt.position\r\n    this._textOption = opt.textOption || {\r\n      text: opt.text || '未输入文字内容',\r\n      textColor: opt.textColor || 'red'\r\n    }\r\n    let TextClass = getDefaultByundefined(opt.textClass, NormalText)\r\n    if (TextClass) this._createText(TextClass)\r\n  }\r\n  _clickHandle() {\r\n\r\n  }\r\n  _createText(TextClass) {\r\n    if (this._textObj) {\r\n      typeof this._textObj.destroy === 'function' && this._textObj.destroy()\r\n      this._textObj = null\r\n    }\r\n    let opt = {\r\n      map: this.getMap(),\r\n      position: this._position,\r\n      ...this._textOption\r\n    }\r\n    this._textObj = new TextClass(opt)\r\n  }\r\n  getOverlays() {\r\n    let prism = this._prism\r\n    if (!prism) {\r\n      prism = new AMap.Object3D.Prism({\r\n        path: this._coordinate,\r\n        height: this._height,\r\n        color: this._color\r\n      })\r\n      prism.transparent = this._transparent\r\n      this._prism = prism\r\n    }\r\n    // console.log(prism)\r\n    return prism\r\n  }\r\n\r\n  show() {\r\n    super.show()\r\n    if (this._textObj) {\r\n      this._textObj.setMap(this.getMap())\r\n    }\r\n  }\r\n\r\n  hide() {\r\n    super.hide()\r\n    if (this._textObj) {\r\n      this._textObj.setMap(null)\r\n    }\r\n  }\r\n\r\n  getText() {\r\n    return this._textObj || null\r\n  }\r\n\r\n  lngLatToGeodeticCoord(list) {\r\n    let map = this.getMap()\r\n    for (let i = 0; i < list.length; i++) {\r\n      const area = list[i];\r\n      for (let s = 0; s < area.length; s++) {\r\n        var g = map.lngLatToGeodeticCoord(area[s])\r\n        area[s] = g\r\n      }\r\n    }\r\n    return list\r\n  }\r\n}","import gl_Overlays from '../base/gl_Overlays'\r\nimport gl_Polyrect from '../gl_Polyrect/gl_Polyrect'\r\nimport {\r\n  getMergeObject,\r\n  getDefaultByundefined\r\n} from '../../js/utils'\r\n/**\r\n * opt\r\n * map 必传\r\n * object3DLayer\r\n * color\r\n * height\r\n * transparent\r\n * textOption\r\n * textClass\r\n * click\r\n */\r\nexport default class gl_PolyrectList extends gl_Overlays {\r\n  constructor(opt) {\r\n    if (!opt.object3DLayer) {\r\n      opt.object3DLayer = new AMap.Object3DLayer();\r\n      opt.object3DLayer.setMap(opt.map)\r\n    }\r\n    super(opt)\r\n    this._clickHandle = this._clickHandle.bind(this)\r\n    this._initialize(opt)\r\n  }\r\n  _initialize(opt) {\r\n    this._height = opt.height || 5000\r\n    this._color = opt.color || '#0088ffcc'\r\n    this._transparent = getDefaultByundefined(opt.transparent, true)\r\n    this._textOption = opt.textOption\r\n    this._textClass = opt.textClass\r\n    this._click = opt.click\r\n    this._polyrects = []\r\n  }\r\n\r\n  _clickHandle(polyrect, data) {\r\n    typeof this._click === 'function' && this._click(polyrect, data)\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {Array(opt)} list \r\n   * opt : \r\n   * coordinate 必传\r\n   * color\r\n   * height\r\n   * transparent\r\n   * extData\r\n   * textOption\r\n   * position 有文字需传\r\n   * textClass\r\n   */\r\n  setData(list, show = true) {\r\n    this.clear()\r\n    let g = getDefaultByundefined\r\n    this._polyrects = list.map(item => {\r\n      let opt = {\r\n        map: this.getMap(),\r\n        object3DLayer: this.getObject3DLayer(),\r\n        coordinate: item.coordinate,\r\n        color: g(item.color, this._color),\r\n        height: g(item.height, this._height),\r\n        transparent: g(item.transparent, this._transparent),\r\n        extData: item.extData || item,\r\n        position: item.position,\r\n        textClass: g(item.textClass, this._textClass),\r\n        textOption: getMergeObject(this._textOption, item.textOption)\r\n      }\r\n      return new gl_Polyrect(opt)\r\n    })\r\n\r\n    if (show) {\r\n      this.show()\r\n    }\r\n  }\r\n\r\n  getOverlays() {\r\n    // return [...this._polyrects]\r\n    return this._polyrects.map(polyrect => {\r\n      return polyrect.getOverlays()\r\n    })\r\n  }\r\n\r\n  clear() {\r\n    let list = this.getOverlays()\r\n    if (list && list.length) {\r\n      list.forEach(polyrect => {\r\n        polyrect.destroy()\r\n      })\r\n    }\r\n    this._polyrects = []\r\n  }\r\n\r\n  destroy() {\r\n    super.destroy()\r\n  }\r\n}","import gl_Overlays from '../base/gl_Overlays'\r\nimport {\r\n  getDefaultByundefined\r\n} from '../../js/utils'\r\n/**\r\n * 生成一个多边形几何体\r\n * opt\r\n * map\r\n * object3DLayer\r\n *\r\n * radius : Int 半径\r\n * height : Int 高度\r\n * segment : Int 分割数量\r\n * topColor :Array<Number> [r,g,b,q] rgba (0-1之间取值) 必须4个值\r\n * topFaceColor : 同上\r\n * bottomColor : 同上\r\n * color : 颜色(优先使用上面的颜色)\r\n * transparent Bool 透明\r\n * position [x,y]\r\n */\r\nexport default class gl_RegularPrism extends gl_Overlays {\r\n  constructor(opt) {\r\n    super(opt)\r\n    this._initialize(opt || {})\r\n  }\r\n  _initialize(opt) {\r\n    this._height = getDefaultByundefined(opt.height, 1000)\r\n    this._radius = getDefaultByundefined(opt.radius, 1000)\r\n    this._segment = getDefaultByundefined(opt.segment, 4)\r\n    this._transparent = getDefaultByundefined(opt.transparent, true)\r\n    this._color = opt.color || [0, 0, 1, 0.4]\r\n    this._topColor = opt.topColor\r\n    this._bottomColor = opt.bottomColor\r\n    this._topFaceColor = opt.topFaceColor\r\n    this._position = opt.position\r\n    this._createMesh()\r\n  }\r\n\r\n  getTopColor() {\r\n    return this._topColor || this._color\r\n  }\r\n\r\n  getBottomColor() {\r\n    return this._bottomColor || this._color\r\n  }\r\n\r\n  getTopFaceColor() {\r\n    return this._topFaceColor || this._color\r\n  }\r\n\r\n  _createMesh() {\r\n    let segment = this._segment\r\n    let radius = this._radius\r\n    let center = this.getMap().lngLatToGeodeticCoord(this._position)\r\n    let height = this._height\r\n    let topColor = this.getTopColor()\r\n    let bottomColor = this.getBottomColor()\r\n    let topFaceColor = this.getTopFaceColor()\r\n    // let bottomColor =\r\n    let cylinder = new AMap.Object3D.Mesh()\r\n    let geometry = cylinder.geometry\r\n    let verticesLength = this._segment * 2\r\n    let path = []\r\n    for (let i = 0; i < segment; i++) {\r\n      let angle = (2 * Math.PI * i) / segment\r\n      let x = center.x + Math.cos(angle) * radius\r\n      let y = center.y + Math.sin(angle) * radius\r\n      path.push([x, y])\r\n      geometry.vertices.push(x, y, 0) //增加底部顶点\r\n      geometry.vertices.push(x, y, -height) //增加顶部顶点\r\n      // 加载颜色\r\n      geometry.vertexColors.push(...bottomColor, ...topColor)\r\n\r\n      let bottomIndex = i * 2\r\n      let topIndex = bottomIndex + 1\r\n      let nextBottomIndex = (bottomIndex + 2) % verticesLength\r\n      let nextTopIndex = (bottomIndex + 3) % verticesLength\r\n\r\n      geometry.faces.push(bottomIndex, topIndex, nextTopIndex) //侧面三角形1\r\n      geometry.faces.push(bottomIndex, nextTopIndex, nextBottomIndex) //侧面三角形2\r\n    }\r\n\r\n    // 因为顶部可能是单独的颜色,不可以使用原来的faces索引,需要单独给顶点增加索引(通用使用)\r\n    for (let i = 0; i < segment; i++) {\r\n      // 读到所有的顶部的顶点,加在vertices最后面\r\n      geometry.vertices.push(...geometry.vertices.slice(i * 6 + 3, i * 6 + 6))\r\n      geometry.vertexColors.push(...topFaceColor)\r\n    }\r\n\r\n    let triangles = AMap.GeometryUtil.triangulateShape(path)\r\n    let offset = segment * 2\r\n\r\n    for (var v = 0; v < triangles.length; v += 3) {\r\n      geometry.faces.push(\r\n        triangles[v] + offset,\r\n        triangles[v + 2] + offset,\r\n        triangles[v + 1] + offset\r\n      )\r\n    }\r\n\r\n    cylinder.transparent = this._transparent\r\n\r\n    cylinder.__class = this\r\n\r\n    this.setOverlays(cylinder)\r\n  }\r\n\r\n  /**\r\n   * 修改圆柱体颜色\r\n   * @param {Object} colors \r\n   * topColor :Array<Number> [r,g,b,q] rgba (0-1之间取值) 必须4个值\r\n   * topFaceColor : 同上\r\n   * bottomColor : 同上\r\n   * color : 颜色(优先使用上面的颜色)\r\n   */\r\n  setColor(colors, draw = true) {\r\n    if (colors.color) this._color = colors.color\r\n    if (colors.topColor) this._topColor = colors.topColor\r\n    if (colors.bottomColor) this._bottomColor = colors.bottomColor\r\n    if (colors.topFaceColor) this._topFaceColor = colors.topFaceColor\r\n    this._updateColor(draw)\r\n  }\r\n\r\n  getColor() {\r\n    return {\r\n      topColor: this._topColor,\r\n      bottomColor: this._bottomColor,\r\n      topFaceColor: this._topFaceColor,\r\n      color: this._color\r\n    }\r\n  }\r\n\r\n  _updateColor(draw = true) {\r\n    let mesh = this.getOverlays()\r\n    let vertexColors = []\r\n    let segment = this._segment\r\n    let bottomColor = this.getBottomColor()\r\n    let topColor = this.getTopColor()\r\n    let topFaceColor = this.getTopFaceColor()\r\n    for (let i = 0; i < segment; i++) {\r\n      vertexColors.push(...bottomColor, ...topColor)\r\n    }\r\n    // 顶部颜色\r\n    for (let i = 0; i < segment; i++) {\r\n      vertexColors.push(...topFaceColor)\r\n    }\r\n    mesh.geometry.vertexColors.splice(0, mesh.geometry.vertexColors.length, ...vertexColors)\r\n    mesh.needUpdate = true\r\n    if (draw) {\r\n      mesh.reDraw()\r\n    }\r\n  }\r\n  getHeight() {\r\n    return this._height\r\n  }\r\n  // 设置圆柱体高度\r\n  setHeight(height = 10000, draw = true) {\r\n    this._height = height\r\n    let mesh = this.getOverlays()\r\n    let vertices = mesh.geometry.vertices\r\n    let segment = this._segment\r\n    for (let i = 0; i < segment; i++) { // 修改每个顶点的高度值\r\n      let z = i * 6 + 5\r\n      vertices[z] = -height\r\n    }\r\n    // 后面还有单独的顶部顶点(顶部顶点通用设计,给单独顶点)\r\n    let z = segment * 6 - 1 // (拿到最后一个圆柱体索引,索引从0开始所以-1)\r\n    for (let i = z + 3; i < vertices.length; i += 3) {\r\n      vertices[i] = -height\r\n    }\r\n    mesh.needUpdate = true\r\n    if (draw) {\r\n      mesh.reDraw()\r\n    }\r\n  }\r\n  getRadius() {\r\n    return this._radius\r\n  }\r\n  // 修改半径后所有的x,y坐标需要重新计算,和所有顶点重绘性能区别不大,不单独写了\r\n  setRadius(radius = 10000, draw = true) {\r\n    this._radius = radius\r\n    this._updateVertices(draw)\r\n  }\r\n\r\n  getPosition() {\r\n    return this._position\r\n  }\r\n\r\n  setPosition(position = [120, 30], draw = true) {\r\n    this._position = position\r\n    this._updateVertices(draw)\r\n  }\r\n\r\n  // 对顶点坐标进行刷新(segment不能发生改变)\r\n  _updateVertices(draw = true) {\r\n    let segment = this._segment\r\n    let radius = this._radius\r\n    let center = this.getMap().lngLatToGeodeticCoord(this._position)\r\n    let height = this._height\r\n    let mesh = this.getOverlays()\r\n    let vertices = []\r\n    for (let i = 0; i < segment; i++) {\r\n      let angle = (2 * Math.PI * i) / segment\r\n      let x = center.x + Math.cos(angle) * radius\r\n      let y = center.y + Math.sin(angle) * radius\r\n      vertices.push(x, y, 0, x, y, -height)\r\n    }\r\n    for (let i = 0; i < segment; i++) {\r\n      vertices.push(...vertices.slice(i * 6 + 3, i * 6 + 6))\r\n    }\r\n    mesh.geometry.vertices.splice(0, mesh.geometry.vertices.length, ...vertices)\r\n    mesh.needUpdate = true\r\n    if (draw) {\r\n      mesh.reDraw()\r\n    }\r\n  }\r\n\r\n  reDraw() {\r\n    let overlays = this.getOverlays()\r\n    overlays.reDraw()\r\n    // this.__callMethod(overlays, 'reDraw', null)\r\n  }\r\n\r\n}","import gl_Overlays from '../base/gl_Overlays'\r\nimport gl_RegularPrism from '../gl_RegularPrism/gl_RegularPrism'\r\nimport {\r\n  getDefaultByundefined,\r\n  uuid\r\n} from '../../js/utils'\r\nimport {\r\n  getMedian\r\n} from '../../js/math'\r\n/**\r\n * opt\r\n * map 必传\r\n * object3DLayer\r\n * radius : Int 半径\r\n * height : Int 高度\r\n * segment : Int 分割数量\r\n * topColor :Array<Number> [r,g,b,q] rgba (0-1之间取值) 必须4个值\r\n * topFaceColor : 同上\r\n * bottomColor : 同上\r\n * color : 颜色(优先使用上面的颜色)\r\n * transparent Bool 透明\r\n * click function 点击\r\n * mouseover function 移入\r\n * mouseout function 移出\r\n */\r\nexport default class gl_RegularPrismList extends gl_Overlays {\r\n  constructor(opt) {\r\n    if (!opt.object3DLayer) {\r\n      opt.object3DLayer = new AMap.Object3DLayer()\r\n      opt.object3DLayer.setMap(opt.map)\r\n    }\r\n    super(opt)\r\n    this._initialize(opt || {})\r\n  }\r\n  _initialize(opt) {\r\n    this._height = getDefaultByundefined(opt.height, 1000)\r\n    this._radius = getDefaultByundefined(opt.radius, 1000)\r\n    this._segment = getDefaultByundefined(opt.segment, 4)\r\n    this._transparent = getDefaultByundefined(opt.transparent, true)\r\n    this._color = opt.color || [0, 0, 1, 0.4]\r\n    this._topColor = opt.topColor\r\n    this._bottomColor = opt.bottomColor\r\n    this._topFaceColor = opt.topFaceColor\r\n    this._click = opt.click\r\n    this._mouseover = opt.mouseover\r\n    this._mouseout = opt.mouseout\r\n    this.__activePrism = null\r\n    this._animateCache = {}\r\n    this._initEvent()\r\n  }\r\n  // 初始化鼠标事件\r\n  _initEvent() {\r\n    if (typeof this._click === 'function') {\r\n      this.getMap().on('click', this._clickHandle, this)\r\n    }\r\n    if (typeof this._mouseover === 'function' || typeof this._mouseout === 'function') {\r\n      this.getMap().on('mousemove', this._mouseMove, this)\r\n    }\r\n  }\r\n  _clickHandle(e) {\r\n    let map = this.getMap()\r\n    let mesh = map.getObject3DByContainerPos(e.pixel, [this.getObject3DLayer()], false)\r\n    if (mesh != null && mesh.object.__class) {\r\n      let prism = mesh.object.__class\r\n      typeof this._click === 'function' && this._click(prism, mesh)\r\n    }\r\n  }\r\n\r\n  _mouseMove(e) {\r\n    let map = this.getMap()\r\n    let mesh = map.getObject3DByContainerPos(e.pixel, [this.getObject3DLayer()], false)\r\n    if (mesh != null && mesh.object.__class) {\r\n      let prism = mesh.object.__class\r\n      if (this.__activePrism != prism) {\r\n        if (this.__activePrism) {\r\n          typeof this._mouseout === 'function' && this._mouseout(this.__activePrism)\r\n          this.__activePrism = null\r\n        }\r\n        this.__activePrism = prism\r\n        typeof this._mouseover === 'function' && this._mouseover(prism)\r\n      }\r\n    } else {\r\n      if (this.__activePrism) {\r\n        typeof this._mouseout === 'function' && this._mouseout(this.__activePrism)\r\n        this.__activePrism = null\r\n      }\r\n    }\r\n  }\r\n\r\n  getTopColor() {\r\n    return this._topColor || this._color\r\n  }\r\n\r\n  getBottomColor() {\r\n    return this._bottomColor || this._color\r\n  }\r\n\r\n  getTopFaceColor() {\r\n    return this._topFaceColor || this._color\r\n  }\r\n\r\n  setData(list, show = true) {\r\n    this.clear()\r\n    this._meshs = list.map(item => {\r\n      let height = item.height || this._height\r\n      let opt = {\r\n        map: this.getMap(),\r\n        object3DLayer: this.getObject3DLayer(),\r\n        position: item.position,\r\n        radius: item.radius || this._radius,\r\n        height: height,\r\n        segment: item.segment || this._segment,\r\n        topColor: item.topColor || this.getTopColor(),\r\n        bottomColor: item.bottomColor || this.getBottomColor(),\r\n        topFaceColor: item.topFaceColor || this.getTopFaceColor(),\r\n        transparent: getDefaultByundefined(item.transparent, this._transparent),\r\n        extData: item.extData || item\r\n      }\r\n      let mesh = new gl_RegularPrism(opt)\r\n      // mesh.__id = Math.random()\r\n      mesh.__id = uuid()\r\n      return mesh\r\n    })\r\n    if (show) {\r\n      this.show()\r\n    }\r\n  }\r\n\r\n  updateHeight(list, equalsFunc = equals, animate = 20000) {\r\n    let meshs = [...this._meshs]\r\n    list.forEach(item => {\r\n      for (let i = 0; i < meshs.length; i++) {\r\n        const mesh = meshs[i]\r\n        let data = mesh.getExtData()\r\n        if (equalsFunc(item, data)) {\r\n          if (animate) {\r\n            let id = mesh.__id\r\n            if (this._animateCache[id]) {\r\n              this._animateCache[id].sourceHeight = item.height\r\n            } else {\r\n              this._animateCache[id] = {\r\n                mesh,\r\n                sourceHeight: item.height,\r\n                step: animate,\r\n                index: null\r\n              }\r\n              this._animateHeight(id)\r\n            }\r\n          } else {\r\n            mesh.setHeight(item.height)\r\n          }\r\n          meshs.slice(i, 1)\r\n          break\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 更新颜色\r\n   * opt : colorOpt or Array<colorOpt>(当为数组时,colorOpt可以添加标记字段(如id),在equalsFunc中判断返回相同mesh的对象设置颜色)\r\n   * topColor :Array<Number> [r,g,b,q] rgba (0-1之间取值) 必须4个值\r\n   * topFaceColor : 同上\r\n   * bottomColor : 同上\r\n   * color : 颜色(优先使用上面的颜色)\r\n   *\r\n   * @param {Array/Object} opt\r\n   * @param {Function} equalsFunc\r\n   */\r\n  updateColor(opt, equalsFunc = equals) {\r\n    if (Array.isArray(opt)) {\r\n      let meshs = [...this._meshs]\r\n      let list = opt\r\n      list.forEach(item => {\r\n        for (let i = 0; i < meshs.length; i++) {\r\n          const mesh = meshs[i]\r\n          let data = mesh.getExtData()\r\n          if (equalsFunc(item, data)) {\r\n            mesh.setColor(item)\r\n            meshs.slice(i, 1)\r\n            break\r\n          }\r\n        }\r\n      })\r\n    } else {\r\n      this._meshs.forEach(mesh => {\r\n        mesh.setColor(opt)\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新几何体半径(当opt为数组时,代表每个几何体单独半径设置,可标记相应字段再equalsFunc中比对,默认为id)\r\n   * @param {Array/Object} opt\r\n   * @param {Function} equalsFunc\r\n   */\r\n  updateRadius(opt, equalsFunc = equals) {\r\n    if (Array.isArray(opt)) {\r\n      let meshs = [...this._meshs]\r\n      let list = opt\r\n      list.forEach(item => {\r\n        for (let i = 0; i < meshs.length; i++) {\r\n          const mesh = meshs[i]\r\n          let data = mesh.getExtData()\r\n          if (equalsFunc(item, data)) {\r\n            mesh.setRadius(item.radius)\r\n            meshs.slice(i, 1)\r\n            break\r\n          }\r\n        }\r\n      })\r\n    } else {\r\n      this._meshs.forEach(mesh => {\r\n        mesh.setRadius(opt.radius)\r\n      })\r\n    }\r\n  }\r\n\r\n  _animateHeight(id) {\r\n    let source = this._animateCache[id]\r\n    let mesh = source.mesh\r\n    let sourceHeight = source.sourceHeight\r\n    let height = mesh.getHeight()\r\n    let step = source.step\r\n    let stepHeight = sourceHeight > height ? height + step : height - step\r\n    let nextHeight = getMedian(height, stepHeight, sourceHeight)\r\n    mesh.setHeight(nextHeight)\r\n    if (nextHeight !== sourceHeight) {\r\n      this._animateCache[id].index = requestAnimationFrame(() => {\r\n        this._animateHeight(id)\r\n      })\r\n    } else {\r\n      delete this._animateCache[id]\r\n    }\r\n  }\r\n\r\n  getOverlays() {\r\n    if (this._meshs && this._meshs.length) {\r\n      return this._meshs.map(t => {\r\n        return t.getOverlays()\r\n      })\r\n    } else {\r\n      return null\r\n    }\r\n  }\r\n\r\n  clear() {\r\n    if (this._meshs && this._meshs.length) {\r\n      this._meshs.forEach(mesh => {\r\n        mesh.destroy()\r\n      })\r\n      this._meshs = []\r\n    }\r\n  }\r\n\r\n  destroy() {\r\n    this.__map.off('mousemove', this._mouseMove, this)\r\n    this.__map.off('click', this._clickHandle, this)\r\n    for (const id in this._animateCache) {\r\n      const mesh = this._animateCache[key]\r\n      if (mesh.index) cancelAnimationFrame(mesh.index)\r\n    }\r\n    super.destroy()\r\n  }\r\n}\r\n\r\nfunction equals(listData, extData) {\r\n  return listData.id === extData.id\r\n}","import Overlays from './components/base/Overlays'\r\n\r\nimport Polyrect from './components/Polyrect/Polyrect'\r\nimport PolyrectList from './components/PolyrectList/PolyrectList'\r\nimport NormalText from './components/NormalText/NormalText'\r\nimport Text3D from './components/Text3D/Text3D'\r\nimport RadarChart from './components/RadarChart/RadarChart'\r\nimport TextQueue from './components/TextQueue/TextQueue'\r\nimport ShadowText from './components/ShadowText/ShadowText'\r\nimport * as Utils from './js/utils'\r\nimport * as Math from './js/math'\r\n\r\nimport gl_Polyrect from './components/gl_Polyrect/gl_Polyrect'\r\nimport gl_PolyrectList from './components/gl_PolyrectList/gl_PolyrectList'\r\nimport gl_RegularPrism from './components/gl_RegularPrism/gl_RegularPrism'\r\nimport gl_RegularPrismList from './components/gl_RegularPrismList/gl_RegularPrismList'\r\n\r\nexport default {\r\n  Overlays,\r\n  Polyrect,\r\n  NormalText,\r\n  Text3D,\r\n  PolyrectList,\r\n  RadarChart,\r\n  TextQueue,\r\n  ShadowText,\r\n  Utils,\r\n  Math,\r\n  gl_Polyrect,\r\n  gl_PolyrectList,\r\n  gl_RegularPrism,\r\n  gl_RegularPrismList\r\n}"],"names":["Overlays","opt","__initialize","CLASS_NAME","constructor","name","__map","map","__position","position","__zIndex","zIndex","__extData","extData","setTimeout","setMap","overlays","methodName","methodArguments","Array","isArray","forEach","o","__callMethod","console","warn","keyList","isChange","list","Object","keys","key","sourceKey","value","undefined","getOverlays","data","__overlays","getMap","MIN_ZOOM","MAX_ZOOM","DEFAULT_IMAGE_WIDTH","DEFAULT_IMAGE_HEIGHT","getDefaultByundefined","ifundefineValue","transposePolyrect","coordinate","sep","arr","pattern","temp","split","t","re","mat","match","i","length","x","parseFloat","y","push","getTextWidth","str","fontSize","replace","getDiffObject","targetOpt","changeOpt","rst","changeFlag","targetValue","getIntersection","parentMin","parentMax","min","max","minZoom","maxZoom","getMergeObject","objs","reduce","pre","sur","getAngle","px","py","mx","my","Math","abs","z","sqrt","pow","cos","radina","acos","angle","PI","uuid","s","hexDigits","substr","floor","random","join","getFixMapBound","sourceBound","left","top","width","height","minPoint","getSouthWest","maxPoint","getNorthEast","subX","getLng","subY","getLat","addX","addY","topY","leftX","rightX","bottomY","minXY","maxXY","AMap","Bounds","NormalText","_initialize","_text","text","_textColor","textColor","_paddingWidth","paddingWidth","_textSize","textSize","_paddingHeight","paddingHeight","_offsetTop","offsetTop","_offsetLeft","offsetLeft","_createMarker","dom","_dom","_createElement","marker","Marker","getPosition","offset","Pixel","content","body","bubble","getzIndex","setOverlays","document","createElement","className","style","color","innerText","appendChild","Polyrect","_clickHandle","bind","_mouseOut","_mouseOver","_strokeColor","strokeColor","_strokeOpacity","strokeOpacity","_strokeWeight","strokeWeight","_fillColor","fillColor","_fillOpacity","fillOpacity","_textOption","textOption","_click","click","_mouseover","mouseover","_mouseout","mouseout","_useCanvas","useCanvas","_coordinate","_checkCoordinate","checkCoordinate","_createCheckPolygon","isUseCanvas","_createCustomLayer","_createPolygon","_overLayGroup","OverlayGroup","_polygons","TextClass","textClass","_createText","_textObj","destroy","zoom","__minZoom","__maxZoom","getExtData","hasCheckPolygon","_checkPolygons","polygon","Polygon","path","_addEvent","hasBindEvent","canvas","_canvas","_ctx","getContext","size","getSize","_canvas_width","_canvas_height","_cus","CustomLayer","render","_draw","_clearCanvas","_drawCanvas","ctx","clearRect","save","strokeStyle","lineWidth","fillStyle","pixels","lngLatToContainer","beginPath","globalAlpha","pixel","lineTo","getX","getY","closePath","stroke","fill","restore","on","e","call","textObj","oldText","getText","KEY_LIST","__changeOptions","setOptions","checkPolygon","PolyrectList","polyrect","_textClass","_polyrects","setPolygonStyle","clear","g","item","getPolyrects","Text3D","_showRipples","isShowRipples","_imageOption","imageOption","_className","smallCircle","display","largeCircle","addEventListener","showRipples","strText","img","src","backgroundImage","RadarChart","_map","_center","center","_target","target","_speed","speed","_coverNumber","coverNumber","_fillStyle","_callback","callback","_isStart","_deg","_createCanvasLayer","positionObj","getPixel","minPixel","minPosition","maxPixel","maxPosition","_width","_height","_clayer","CanvasLayer","bounds","stop","radius","_ctx2","moveTo","arc","startDeg","_drawRadar","_cover","reFresh","start","end","window","requestAnimationFrame","deg","globalCompositeOperation","rect","dis","TextQueue","_list","_font","font","_start","_createLayer","reload","_pixel","now","Date","textAlign","textBaseline","obj","timer","_time","_del","translate","scale","opacity","fillText","filter","ShadowText","_shaderRatio","shaderRatio","shadow","getMedian","a","b","c","gl_Overlays","__object3DLayer","object3DLayer","object3dLayer","hide","gl_Polyrect","_color","_transparent","transparent","lngLatToGeodeticCoord","_position","prism","_prism","Object3D","Prism","area","gl_PolyrectList","Object3DLayer","show","getObject3DLayer","gl_RegularPrism","_radius","_segment","segment","_topColor","topColor","_bottomColor","bottomColor","_topFaceColor","topFaceColor","_createMesh","getTopColor","getBottomColor","getTopFaceColor","cylinder","Mesh","geometry","verticesLength","sin","vertices","vertexColors","bottomIndex","topIndex","nextBottomIndex","nextTopIndex","faces","slice","triangles","GeometryUtil","triangulateShape","v","__class","colors","draw","_updateColor","mesh","splice","needUpdate","reDraw","_updateVertices","gl_RegularPrismList","__activePrism","_animateCache","_initEvent","_mouseMove","getObject3DByContainerPos","object","_meshs","__id","equalsFunc","equals","animate","meshs","id","sourceHeight","step","index","_animateHeight","setHeight","setColor","setRadius","source","getHeight","stepHeight","nextHeight","off","cancelAnimationFrame","listData","Utils"],"mappings":"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"}